define(["react"],function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c),u=n(388),f=r(u);n(391);var d=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.dataSource=[],n.componentDidMount=function(){T.ajax({key:"secRecordPath",f:"json",success:function(e){n.setState({datas:e},function(){n.refs.swiper.reset()})}})},n.refresh=function(){T.ajax({key:"secRecordPath",f:"json",success:function(e){setTimeout(function(){n.setState({datas:e},function(){n.refs.swiper.cancel_refresh()})},1e3)}})},n.load=function(){setTimeout(function(){console.log("load");var e=n.state.datas;e.length;n.refs.swiper.cancel_load()},1e3)},n.onClick=function(e){console.log(e)},n.height=document.documentElement.clientHeight||document.body.clientHeight,n.config={wrapperHeight:500,duration:.5,sensibility:1},n.state={datas:[]},n}return i(t,e),s(t,[{key:"render",value:function(){var e=this.onClick;return l.default.createElement("div",{className:"Swiper_demo"},l.default.createElement(f.default,{config:this.config,refresh:this.refresh,load:this.load,ref:"swiper"},l.default.createElement("ul",null,this.state.datas.map(function(t,n){return l.default.createElement("li",{onClick:function(){return e(t)}},t)}))))}}]),t}(l.default.Component);t.default=d},1:function(t,n){t.exports=e},388:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),l=r(c);n(389);var u=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.startY=0,n.endY=0,n.timer=null,n.down="./assets/Swiper/down.png",n.loading="./assets/Swiper/loading.gif",n.complete="./assets/Swiper/complete.png",n.scrollerHeight=1e3,n.bottomHeight=0,n.componentDidMount=function(){n.event_bind(n.refs.wrapper)},n.reset=function(){n.get_child_height(),n.setState()},n.get_child_height=function(){var e=n.props.config.wrapperHeight,t=n.refs.scroller.scrollHeight;n.bottomHeight=t-e+44,n.scrollerHeight=t},n.event_bind=function(e){var t=n.props.config;e.addEventListener("touchstart",function(e){n.timer=(new Date).getTime(),n.startY=e.touches[0].pageY,n.state.refresh_end=!1,n.state.load_end=!1}),e.addEventListener("touchmove",function(e){e.preventDefault();var r=(e.touches[0].pageY-n.startY)/t.sensibility+n.endY;r>44?n.state.icon_deg=180:r>=0&&r<=44?n.state.icon_deg=r/44*180:n.state.icon_deg=180,n.setState({distance:r})}),e.addEventListener("touchend",function(e){var r=t.duration?t.duration:((new Date).getTime()-n.timer)/1e3,o=n.state.distance;if(o>44)n.props.refresh&&(n.state.refresh_img=n.loading,n.state.refresh_text="刷新中...",n.state.distance=44,n.props.refresh());else if(o>0&&o<=44)n.state.distance=0;else if(o<0){var a=n.refs.scroller,i=a.offsetHeight,s=a.scrollHeight,c=s-i;Math.abs(o)>c?(n.state.distance=-c,n.endY=-c,n.props.load&&(n.state.load_text="加载中...",n.state.load_img=n.loading,n.state.distance=-n.bottomHeight,n.props.load())):n.endY=o}n.setState({refresh_end:!0,load_end:!0,duration:r},function(){n.timer=null})})},n.cancel_refresh=function(){n.setState({refresh_img:n.complete,refresh_text:"刷新成功",icon_deg:0},function(){setTimeout(function(){n.reset(),n.setState({refresh_img:n.down,distance:0,refresh_text:"下拉刷新"})},1e3)})},n.cancel_load=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"加载完成";n.setState({load_img:n.complete,load_text:e,icon_deg:0},function(){setTimeout(function(){n.reset(),n.setState({load_img:n.down,distance:n.endY,load_text:"加载更多"})},1e3)})},n.state={distance:0,icon_deg:0,refresh_end:!1,load_end:!1,duration:0,refresh_text:"下拉刷新",refresh_img:n.down,load_text:"加载更多",load_img:n.down},n}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.config,t=e.wrapperHeight,n=this.state,r=n.distance,o=n.icon_deg,a=n.refresh_end,i=n.duration,s=n.refresh_text,c=(n.loading,n.refresh_img),u=n.load_end,f=n.load_text,d=n.load_img,p=document.documentElement.clientHeight||document.body.clientHeight,h=(document.documentElement.clientWidth||document.body.clientWidth,{transform:"translate3d(0px, "+r+"px, 0)"});a&&(h=Object.assign(h,{transition:"all "+i+"s ease"}));var m={transform:"translate3d(0px, "+r+"px, 0)",top:this.scrollerHeight};u&&(m=Object.assign(m,{top:this.scrollerHeight,transition:"all "+i+"s ease"}));var g=Object.assign({},{height:t?t:p},h),_=[];e.refresh!==!0&&void 0!==e.refresh||_.push(l.default.createElement("div",{className:a?"refresh refresh-end":"refresh",style:h},l.default.createElement("span",{className:"refresh-icon",style:{transform:"rotateZ("+o+"deg)"}},l.default.createElement("img",{src:c})),l.default.createElement("span",{className:"refresh-text"},s)));var v=[];return e.load!==!0&&void 0!==e.load||v.push(l.default.createElement("div",{className:u?"load load-end":"load",style:m},l.default.createElement("span",{className:"load-icon",style:{transform:"rotateZ("+o+"deg)"}},l.default.createElement("img",{src:d})),l.default.createElement("span",{className:"load-text"},f))),l.default.createElement("div",{className:"Swiper"},l.default.createElement("div",{ref:"wrapper",className:"wrapper"},l.default.Children.map(this.props.children,function(e){return e=l.default.cloneElement(e,{className:"child-z-index-8"}),l.default.createElement("div",null,l.default.createElement("div",{style:g,ref:"scroller"},e),_,v)})))}}]),t}(l.default.Component);t.default=u},389:function(e,t){},391:function(e,t){}})});